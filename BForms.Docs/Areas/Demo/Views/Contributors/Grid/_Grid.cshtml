@using BForms.Html
@using BForms.Grid
@using BForms.Models
@using BForms.Docs.Resources
@using BForms.Docs.Areas.Demo.Helpers
@using BForms.Docs.Areas.Demo.Models
@model ContributorsViewModel
                                
@(Html.BsGridFor(m => m.Grid)
        .MultipleSelectActions(Html.Partial("Grid/_Actions").ToString())
        .HtmlAttributes(new { @class = "custom_class" })
        .RowHighlighter(row => row.Enabled ? "#59b444" : "#f0ad4e")
        .RowData(row => new Dictionary<string, object> { { "data-objid", row.Id }, { "data-active", row.Enabled } })
        .ConfigureColumns(cols =>
        {
            cols.Add(c => c.Name).Name(Resource.Name)
                                .SetWidth(2)
                                .Sortable();

            cols.Add(c => c.Role).Name("Role")
                                .SetWidth(3)
                                .Sortable()
                                .Text(x => Html.GetRoleIcon(x.Role) + " " + Html.BsEnumDisplayName(x.Role));

            cols.Add(c => c.StartDate).Name("Contributor since")
                                .SetWidth(3)
                                .Sortable()
                                .Text(x => Html.BsGlyphicon(Glyphicon.Calendar) + " " + x.StartDate.ToMonthNameDate());

            cols.Add(c => c.Contributions).Name("Contributions")
                                .SetWidth(4)
                                .Sortable()
                                .Text(x => string.IsNullOrEmpty(x.Contributions) ? "" : String.Join(", ", x.Contributions.Split(new[] { ',' }).Take(2)));

            cols.For(c => c.Name).Name(Resource.Name);
        })
        .PagerSettings(new BsPagerSettings { DefaultPageSize = 10 })
)
